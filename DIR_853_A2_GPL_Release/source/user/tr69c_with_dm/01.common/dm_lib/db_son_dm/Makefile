#auto-generated by python script.

ifndef PRC_CROSS_COMPILE
PRC_CROSS_COMPILE := /opt/buildroot-gcc463/usr/bin/mipsel-linux-
endif
CC := $(PRC_CROSS_COMPILE)gcc
AR := $(PRC_CROSS_COMPILE)ar
link := $(PRC_CROSS_COMPILE)gcc
STRIP := $(PRC_CROSS_COMPILE)strip


COM_LIB_PATH := ../../
DM_INC_PATH = $(COM_LIB_PATH)/dm_lib/common/inc
DB_EXT_INC_PATH = $(COM_LIB_PATH)/dm_lib/external_type
LIBXML2_INC_PATH = $(COM_LIB_PATH)/dm_lib/libxml2/include


DB_INC_PATH = ./inc
DB_SRCS_PATH = ./src
OBJ_PATH := ./obj
OBJ_PATH_DMALLOC := ./obj_dmalloc
RESULT_PATH := ../lib


OSA_INCLUDES = $(COM_LIB_PATH)/osa/inc
COM_INCLUDES = $(COM_LIB_PATH)/include
DMALLOC_INCLUDES = $(COM_LIB_PATH)/dmalloc


DB_INCLUDES := -I$(DB_INC_PATH) -I$(DB_EXT_INC_PATH) -I$(DM_INC_PATH) -I$(COM_INCLUDES) -I$(OSA_INCLUDES) -I$(LIBXML2_INC_PATH) -I$(DMALLOC_INCLUDES)
DB_OBJ_CFLAGS := -g -Wall -Wshadow -Wcast-qual


DB_LIB = $(RESULT_PATH)/libSon_dmDb.so
DB_LIB_DMALLOC = $(RESULT_PATH)/libSon_dmDb_dmalloc.so
DB_STATIC_LIB = $(RESULT_PATH)/libSon_dmDb.a
DB_STATIC_LIB_DMALLOC = $(RESULT_PATH)/libSon_dmDb_dmalloc.a
DB_OBJS := $(OBJ_PATH)/son_dm_model_pattern.o
DB_OBJS_DMALLOC := $(OBJ_PATH_DMALLOC)/son_dm_model_pattern.o


DB_OBJ_CFLAGS += -fPIC
DB_OBJ_CFLAGS_DMALLOC := $(DB_OBJ_CFLAGS) -DDMALLOC_CHECK_ENABLED
DB_LIB_CFLAGS := -g -Wall -Wshadow -Wcast-qual -O -shared -o


ifdef BRCM_DMALLOC_ENABLED
all : $(DB_LIB) $(DB_STATIC_LIB) $(DB_LIB_DMALLOC) $(DB_STATIC_LIB_DMALLOC)
else
all : $(DB_LIB) $(DB_STATIC_LIB)
endif

$(DB_STATIC_LIB) : $(DB_OBJS)
	$(AR) -r $(DB_STATIC_LIB) $(DB_OBJS)

$(DB_STATIC_LIB_DMALLOC) : $(DB_OBJS_DMALLOC)
	$(AR) -r $(DB_STATIC_LIB_DMALLOC) $(DB_OBJS_DMALLOC)

$(DB_LIB) : $(DB_OBJS)
	$(CC) $(DB_LIB_CFLAGS) $(DB_LIB) $(DB_OBJS)

$(DB_LIB_DMALLOC) : $(DB_OBJS_DMALLOC)
	$(CC) $(DB_LIB_CFLAGS) $(DB_LIB_DMALLOC) $(DB_OBJS_DMALLOC)

$(OBJ_PATH)/son_dm_model_pattern.o :./src/son_dm_model_pattern.c
	@mkdir -p $(OBJ_PATH)
	$(CC) $(DB_OBJ_CFLAGS) $(DB_INCLUDES) -pthread -c $< -o $@

$(OBJ_PATH_DMALLOC)/son_dm_model_pattern.o :./src/son_dm_model_pattern.c
	@mkdir -p $(OBJ_PATH_DMALLOC)
	$(CC) $(DB_OBJ_CFLAGS_DMALLOC) $(DB_INCLUDES) -pthread -c $< -o $@



.PHONY:clean
clean:
	$(RM) $(DB_LIB) $(DB_LIB_DMALLOC)
	$(RM) $(DB_STATIC_LIB) $(DB_STATIC_LIB_DMALLOC)
	$(RM) $(DB_OBJS) $(DB_OBJS_DMALLOC)


.PHONY:code_clean
code_clean:
	$(RM) -rf ./src/*
	$(RM) -rf ../obj/*
