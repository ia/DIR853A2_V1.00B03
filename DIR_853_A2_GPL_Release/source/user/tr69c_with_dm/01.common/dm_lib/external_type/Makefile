#auto-generated by python.

ifndef PRC_CROSS_COMPILE
PRC_CROSS_COMPILE := /opt/buildroot-gcc463/usr/bin/mipsel-linux-
endif
CC := $(PRC_CROSS_COMPILE)gcc
AR := $(PRC_CROSS_COMPILE)ar
link := $(PRC_CROSS_COMPILE)gcc
STRIP := $(PRC_CROSS_COMPILE)strip


ifndef RESULT_PATH
RESULT_PATH := ../lib
endif
OBJ_PATH := ../obj
OBJ_PATH_DMALLOC := ../obj_dmalloc

DM_INC_PATH = ../common/inc
DB_EXT_INC_PATH = ./
DB_EXT_SRC_PATH = ./
LIBXML2_INC_PATH = ../libxml2/include


OSA_INCLUDES = ../../osa/inc
COM_INCLUDES = ../../include
DBG_INCLUDES = ../../debug_lib/inc
DMALLOC_INCLUDES = ../../dmalloc

DB_EXT_INCLUDES := -I$(DB_EXT_INC_PATH) -I$(DM_INC_PATH) -I$(COM_INCLUDES) -I$(OSA_INCLUDES) -I$(DBG_INCLUDES) -I$(LIBXML2_INC_PATH) -I$(DMALLOC_INCLUDES)
DB_EXT_OBJ_CFLAGS := -g -Wall -Wshadow -Wcast-qual


DB_EXT_LIB = $(RESULT_PATH)/libDbConv.so
DB_EXT_STATIC_LIB = $(RESULT_PATH)/libDbConv.a
DB_EXT_OBJS := $(OBJ_PATH)/device_external_type.o

DB_EXT_LIB_DMALLOC = $(RESULT_PATH)/libDbConv_dmalloc.so
DB_EXT_STATIC_LIB_DMALLOC = $(RESULT_PATH)/libDbConv_dmalloc.a
DB_EXT_OBJS_DMALLOC := $(OBJ_PATH_DMALLOC)/device_external_type.o

DB_EXT_OBJ_CFLAGS += -fPIC
DB_EXT_OBJ_CFLAGS_DMALLOC := $(DB_EXT_OBJ_CFLAGS) -DDMALLOC_CHECK_ENABLED
DB_EXT_LIB_CFLAGS := -g -Wall -Wshadow -Wcast-qual -O -shared -o

ifdef BRCM_DMALLOC_ENABLED 
all : $(DB_EXT_LIB) $(DB_EXT_STATIC_LIB) $(DB_EXT_LIB_DMALLOC) $(DB_EXT_STATIC_LIB_DMALLOC)
else
all : $(DB_EXT_LIB) $(DB_EXT_STATIC_LIB)
endif

$(DB_EXT_STATIC_LIB) : $(DB_EXT_OBJS)
	$(AR) -r $(DB_EXT_STATIC_LIB) $(DB_EXT_OBJS)

$(DB_EXT_LIB) : $(DB_EXT_OBJS)
	$(CC) $(DB_EXT_LIB_CFLAGS) $(DB_EXT_LIB) $(DB_EXT_OBJS)

$(DB_EXT_STATIC_LIB_DMALLOC) : $(DB_EXT_OBJS_DMALLOC)
	$(AR) -r $(DB_EXT_STATIC_LIB_DMALLOC) $(DB_EXT_OBJS_DMALLOC)

$(DB_EXT_LIB_DMALLOC) : $(DB_EXT_OBJS_DMALLOC)
	$(CC) $(DB_EXT_LIB_CFLAGS) $(DB_EXT_LIB_DMALLOC) $(DB_EXT_OBJS_DMALLOC)

$(OBJ_PATH)/device_external_type.o :./device_external_type.c
	$(CC) $(DB_EXT_OBJ_CFLAGS) $(DB_EXT_INCLUDES) -pthread -c $< -o $@

$(OBJ_PATH_DMALLOC)/device_external_type.o :./device_external_type.c
	$(CC) $(DB_EXT_OBJ_CFLAGS_DMALLOC) $(DB_EXT_INCLUDES) -pthread -c $< -o $@

.PHONY:clean
clean:
	$(RM) $(DB_EXT_LIB) $(DB_EXT_STATIC_LIB) $(DB_EXT_OBJS) $(DB_EXT_LIB_DMALLOC) $(DB_EXT_STATIC_LIB_DMALLOC) $(DB_EXT_OBJS_DMALLOC)


.PHONY:code_clean
code_clean:
	$(RM) -rf ./*.c

